# プローススタイリング機能（見出し・段落・リスト）の実装

## 何を (What)

フェーズ1として、WordPress Gutenbergエディタで生成される見出し、段落、リスト要素のスタイル生成関数を実装しました。

### 実装した機能
- 見出しスタイル生成関数（h1-h6）
- 段落スタイル生成関数
- リストスタイル生成関数（ul, ol）
- リスト項目スタイル生成関数（li）

### 作成・変更したファイル
- `app/presentation/utils/prose-styles.ts` (新規作成)
- `app/presentation/utils/index.ts` (更新：エクスポート追加)
- `app/presentation/utils/__tests__/prose-styles.node.spec.ts` (新規作成：テストファイル)

## どんな目的で (Why)

WordPress Gutenbergエディタで生成されるHTMLコンテンツに対して、Tailwind CSSによるスタイリングを適用し、見出しと本文に視覚的なメリハリを持たせるために実装しました。

現在、ブログ記事詳細ページでは`prose`クラスが適用されているものの、見出しと本文の区別が視覚的に分かりにくい状況でした。最も重要な要素である見出し、段落、リストから優先的に実装することで、早期に視覚的な改善を実現することを目的としています。

## どう変更したか (How)

### スタイル生成関数の実装

純粋関数として、各要素のスタイル生成関数を実装しました。

#### 見出しスタイル生成関数 (`getHeadingStyles`)
見出しレベル（1-6）に応じて、適切なフォントサイズ、太さ、余白を設定する関数を実装しました。レスポンシブ対応（モバイル・デスクトップ）とダークモード対応を含んでいます。各レベルで以下のようなスタイルが設定されます：

- h1: `text-3xl md:text-4xl font-bold mt-8 mb-4 text-foreground`
- h2: `text-2xl md:text-3xl font-bold mt-8 mb-4 text-foreground`
- h3: `text-xl md:text-2xl font-bold mt-8 mb-4 text-foreground`
- h4: `text-lg md:text-xl font-bold mt-8 mb-4 text-foreground`
- h5: `text-base md:text-lg font-bold mt-8 mb-4 text-foreground`
- h6: `text-sm md:text-base font-bold mt-8 mb-4 text-foreground`

#### 段落スタイル生成関数 (`getParagraphStyles`)
読みやすい行間、適切な余白、フォントサイズを設定する関数を実装しました。結果として `mb-4 leading-7 text-foreground` が返されます。

#### リストスタイル生成関数 (`getListStyles`)
順序付きリスト（ol）と順序なしリスト（ul）で適切なスタイルを設定する関数を実装しました。インデント、マーカー、余白を考慮しています。

- ul: `mb-4 ml-6 list-disc space-y-2`
- ol: `mb-4 ml-6 list-decimal space-y-2`

#### リスト項目スタイル生成関数 (`getListItemStyles`)
リスト項目の余白と行間を設定する関数を実装しました。結果として `leading-7 text-foreground` が返されます。

### 純粋関数としての設計

全ての関数は純粋関数として実装されており、以下の特性を持っています：
- 副作用を持たない
- 同じ入力に対して常に同じ出力を返す
- 外部状態に依存しない

### テスト実装

各スタイル生成関数に対して、以下のテストケースを実装しました：
- 各見出しレベルで正しいスタイルが返されることの確認
- 段落スタイルが正しく返されることの確認
- リストタイプ（ul/ol）で適切なスタイルが返されることの確認
- リスト項目スタイルが正しく返されることの確認
- 純粋関数としての特性（同じ入力に対して同じ出力）の確認

### エクスポート設定

`presentation/utils/index.ts`に各関数をエクスポートする設定を追加しました。

## 考えられる影響と範囲

### 既存機能への影響
- 今回の実装は新規ファイルの作成と、既存の`index.ts`へのエクスポート追加のみのため、既存機能への影響はありません
- スタイル生成関数は実装済みですが、まだHTML変換処理には統合されていないため、現時点では視覚的な変更は発生しません

### 今後の統合予定
- フェーズ4で`html-to-react.ts`にスタイル生成関数を統合する予定です
- 統合後、ブログ記事の見出し、段落、リストが適切にスタイリングされます

### 型安全性
- 全ての関数に適切な型定義を追加しました
- TypeScriptの型チェックで問題なし

## 課題

### テスト環境の未設定
- 現在、Vitestのテスト環境がセットアップされていないため、テストを実行できません
- 次フェーズまでにテスト環境をセットアップする必要があります（または、テスト環境が既に別の場所で設定されている可能性もあるため、確認が必要です）

### 今後の実装予定
- フェーズ2: リンク・引用・画像のスタイル生成関数
- フェーズ3: インライン装飾・テーブルのスタイル生成関数
- フェーズ4: HTML変換処理へのスタイル適用統合
- フェーズ5: 全体の動作確認とリファクタリング

## 完了したチェックリスト

- [x] 見出し（h1-h6）のスタイル生成関数が実装済み
- [x] 段落（p）のスタイル生成関数が実装済み
- [x] リスト（ul, ol, li）のスタイル生成関数が実装済み
- [x] 型エラーが0件（新規ファイルに関する型エラーはなし）
- [x] TSDocコメントが記述済み
- [x] レスポンシブ対応が実装済み
- [x] ダークモード対応が実装済み
- [x] テストファイルが作成済み（テスト環境が設定され次第実行可能）
- [x] リントエラーが0件（新規ファイルに関するリントエラーはなし）
